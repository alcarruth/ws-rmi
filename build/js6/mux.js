// Generated by CoffeeScript 2.3.2
(function() {
  ({
    constructor: function() {
      this.registry = {};
      this.cnt = 0;
      this.cb_hash = {};
      return this.stubs = [];
    },
    // register an object for multiplex method invocation by the
    // invoke() method (below)

    register: (obj) => {
      return this.registry[obj.id] = obj;
    },
    // parse the request, use the obj_id to look up the
    // corresponding object and invoke the method on the
    // supplied arguments

    invoke: (args, cb) => {
      var cb_id, method, name, obj, obj_id;
      this.cb_hash[this.cnt] = cb;
      this.cnt += 1;
      obj = this.registry[args.obj_id];
      return obj[args.name](args.args, (res) => {
        return this.cb_hash[res.cb_id]();
      }, [obj_id, name, args, cb_id] = JSON.parse(msg), method = this.registry[obj_id][name], this.registry[obj_id][name](args, (res) => {
        return y([cb_id, res]);
      }));
    }
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV4LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIiwic291cmNlcyI6WyJidWlsZC9jb2ZmZWUvbXV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0U7RUFBQSxDQUFBO0lBQUEsV0FBQSxFQUFhLFFBQUEsQ0FBQSxDQUFBO01BQ1gsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFBO01BQ1osSUFBQyxDQUFBLEdBQUQsR0FBTztNQUNQLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQTthQUNYLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFKRSxDQUFiOzs7O0lBU0EsUUFBQSxFQUFVLENBQUMsR0FBRCxDQUFBLEdBQUE7YUFDUixJQUFDLENBQUEsUUFBUyxDQUFBLEdBQUcsQ0FBQyxFQUFKLENBQVYsR0FBb0I7SUFEWixDQVRWOzs7OztJQWdCQSxNQUFBLEVBQVEsQ0FBQyxJQUFELEVBQU8sRUFBUCxDQUFBLEdBQUE7QUFDTixVQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQTtNQUFBLElBQUMsQ0FBQSxPQUFRLENBQUEsSUFBQyxDQUFBLEdBQUQsQ0FBVCxHQUFpQjtNQUNqQixJQUFDLENBQUEsR0FBRCxJQUFRO01BQ1IsR0FBQSxHQUFNLElBQUMsQ0FBQSxRQUFTLENBQUEsSUFBSSxDQUFDLE1BQUw7YUFDaEIsR0FBSSxDQUFBLElBQUksQ0FBQyxJQUFMLENBQUosQ0FBZSxJQUFJLENBQUMsSUFBcEIsRUFBMEIsQ0FBQyxHQUFELENBQUEsR0FBQTtlQUN4QixJQUFDLENBQUEsT0FBUSxDQUFBLEdBQUcsQ0FBQyxLQUFKLENBQVQsQ0FBQTtNQUR3QixDQUExQixFQUlBLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxJQUFmLEVBQXFCLEtBQXJCLENBQUEsR0FBOEIsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYLENBSjlCLEVBS0EsTUFBQSxHQUFTLElBQUMsQ0FBQSxRQUFTLENBQUEsTUFBQSxDQUFRLENBQUEsSUFBQSxDQUwzQixFQVFBLElBQUMsQ0FBQSxRQUFTLENBQUEsTUFBQSxDQUFRLENBQUEsSUFBQSxDQUFsQixDQUF3QixJQUF4QixFQUE4QixDQUFDLEdBQUQsQ0FBQSxHQUFBO2VBQzVCLENBQUEsQ0FBRyxDQUFDLEtBQUQsRUFBUSxHQUFSLENBQUg7TUFENEIsQ0FBOUIsQ0FSQTtJQUpNO0VBaEJSLENBQUE7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbIlxuICBjb25zdHJ1Y3RvcjogLT5cbiAgICBAcmVnaXN0cnkgPSB7fVxuICAgIEBjbnQgPSAwXG4gICAgQGNiX2hhc2ggPSB7fVxuICAgIEBzdHVicyA9IFtdXG5cbiAgIyByZWdpc3RlciBhbiBvYmplY3QgZm9yIG11bHRpcGxleCBtZXRob2QgaW52b2NhdGlvbiBieSB0aGVcbiAgIyBpbnZva2UoKSBtZXRob2QgKGJlbG93KVxuICAjIFxuICByZWdpc3RlcjogKG9iaikgPT5cbiAgICBAcmVnaXN0cnlbb2JqLmlkXSA9IG9ialxuXG4gICMgcGFyc2UgdGhlIHJlcXVlc3QsIHVzZSB0aGUgb2JqX2lkIHRvIGxvb2sgdXAgdGhlXG4gICMgY29ycmVzcG9uZGluZyBvYmplY3QgYW5kIGludm9rZSB0aGUgbWV0aG9kIG9uIHRoZVxuICAjIHN1cHBsaWVkIGFyZ3VtZW50c1xuICAjICAgXG4gIGludm9rZTogKGFyZ3MsIGNiKSA9PlxuICAgIEBjYl9oYXNoW0BjbnRdID0gY2IgXG4gICAgQGNudCArPSAxXG4gICAgb2JqID0gQHJlZ2lzdHJ5W2FyZ3Mub2JqX2lkXVxuICAgIG9ialthcmdzLm5hbWVdKGFyZ3MuYXJncywgKHJlcyk9PlxuICAgICAgQGNiX2hhc2hbcmVzLmNiX2lkXSgpXG5cbiAgICBcbiAgICBbb2JqX2lkLCBuYW1lLCBhcmdzLCBjYl9pZF0gPSBKU09OLnBhcnNlKG1zZylcbiAgICBtZXRob2QgPSBAcmVnaXN0cnlbb2JqX2lkXVtuYW1lXVxuICAgIFxuXG4gICAgQHJlZ2lzdHJ5W29ial9pZF1bbmFtZV0oYXJncywgKHJlcykgPT5cbiAgICAgIHkoIFtjYl9pZCwgcmVzXSkpKVxuXG5cblxuIl19
//# sourceURL=/home/carruth/git/ws_rmi/build/coffee/mux.coffee