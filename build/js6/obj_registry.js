// Generated by CoffeeScript 2.3.2
(function() {
  var Arithmetic, Local_Registry, Remote_Registry, arith, arith_stub, registry;

  Remote_Registry = class Remote_Registry {
    constructor() {
      this.register = this.register.bind(this);
      this.invoke = this.invoke.bind(this);
      this.stub = this.stub.bind(this);
      this.stub_method = this.stub_method.bind(this);
      this.registry = {};
    }

    register(obj) {
      return this.registry[obj.id] = obj;
    }

    invoke(obj_id, method, args) {
      console.log(obj_id);
      console.log(method);
      console.log(args);
      return this.registry[obj_id][method](args);
    }

    stub(obj_id, method_names) {
      var i, len, method, stub_obj;
      stub_obj = {};
      for (i = 0, len = method_names.length; i < len; i++) {
        method = method_names[i];
        stub_obj[method] = this.stub_method(obj_id, method);
      }
      return stub_obj;
    }

    stub_method(obj_id, method) {
      return (args) => {
        return this.invoke(obj_id, method, args);
      };
    }

  };

  Local_Registry = class Local_Registry {
    constructor(remote) {
      this.register = this.register.bind(this);
      this.invoke = this.invoke.bind(this);
      this.stub = this.stub.bind(this);
      this.stub_method = this.stub_method.bind(this);
      this.remote = remote;
      this.registry = {};
    }

    register(obj) {
      return this.registry[obj.id] = obj;
    }

    invoke(obj_id, method, args) {
      console.log(obj_id);
      console.log(method);
      console.log(args);
      return this.registry[obj_id][method](args);
    }

    stub(obj_id, method_names) {
      var i, len, method, stub_obj;
      stub_obj = {};
      for (i = 0, len = method_names.length; i < len; i++) {
        method = method_names[i];
        stub_obj[method] = this.stub_method(obj_id, method);
      }
      return stub_obj;
    }

    stub_method(obj_id, method) {
      return (args) => {
        return this.invoke(obj_id, method, args);
      };
    }

  };

  Arithmetic = class Arithmetic {
    constructor(id) {
      this.add = this.add.bind(this);
      this.sub = this.sub.bind(this);
      this.mul = this.mul.bind(this);
      this.div = this.div.bind(this);
      this.mod = this.mod.bind(this);
      this.abs = this.abs.bind(this);
      this.id = id;
    }

    add(a) {
      return a.x + a.y;
    }

    sub(a) {
      return a.x - a.y;
    }

    mul(a) {
      return a.x * a.y;
    }

    div(a) {
      return a.x / a.y;
    }

    mod(a) {
      return a.x % a.y;
    }

    abs(a) {
      return a.x > 0 && a.x || -a.x;
    }

  };

  arith = new Arithmetic('asdf');

  registry = new Obj_Registry();

  registry.register(arith);

  arith_stub = registry.stub('asdf', ['add', 'sub', 'mul', 'div', 'mod', 'abs']);

  exports.arith = arith;

  exports.registry = registry;

  exports.arith_stub = arith_stub;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqX3JlZ2lzdHJ5LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIiwic291cmNlcyI6WyJidWlsZC9jb2ZmZWUvb2JqX3JlZ2lzdHJ5LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUE7QUFBQSxNQUFBLFVBQUEsRUFBQSxjQUFBLEVBQUEsZUFBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEVBQUE7O0VBQU0sa0JBQU4sTUFBQSxnQkFBQTtJQUVFLFdBQWEsQ0FBQSxDQUFBO1VBR2IsQ0FBQSxlQUFBLENBQUE7VUFHQSxDQUFBLGFBQUEsQ0FBQTtVQU1BLENBQUEsV0FBQSxDQUFBO1VBTUEsQ0FBQSxrQkFBQSxDQUFBO01BakJFLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQTtJQUREOztJQUdiLFFBQVUsQ0FBQyxHQUFELENBQUE7YUFDUixJQUFDLENBQUEsUUFBUyxDQUFBLEdBQUcsQ0FBQyxFQUFKLENBQVYsR0FBb0I7SUFEWjs7SUFHVixNQUFRLENBQUMsTUFBRCxFQUFTLE1BQVQsRUFBaUIsSUFBakIsQ0FBQTtNQUNOLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtNQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtNQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksSUFBWjthQUNBLElBQUMsQ0FBQSxRQUFTLENBQUEsTUFBQSxDQUFRLENBQUEsTUFBQSxDQUFsQixDQUEwQixJQUExQjtJQUpNOztJQU1SLElBQU0sQ0FBQyxNQUFELEVBQVMsWUFBVCxDQUFBO0FBQ0osVUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQTtNQUFBLFFBQUEsR0FBVyxDQUFBO01BQ1gsS0FBQSw4Q0FBQTs7UUFDRSxRQUFTLENBQUEsTUFBQSxDQUFULEdBQW1CLElBQUMsQ0FBQSxXQUFELENBQWEsTUFBYixFQUFxQixNQUFyQjtNQURyQjtBQUVBLGFBQU87SUFKSDs7SUFNTixXQUFhLENBQUMsTUFBRCxFQUFTLE1BQVQsQ0FBQTthQUNYLENBQUMsSUFBRCxDQUFB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RXJCIiwic291cmNlc0NvbnRlbnQiOlsiXG5cbmNsYXNzIFJlbW90ZV9SZWdpc3RyeVxuXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIEByZWdpc3RyeSA9IHt9XG5cbiAgcmVnaXN0ZXI6IChvYmopID0+XG4gICAgQHJlZ2lzdHJ5W29iai5pZF0gPSBvYmpcblxuICBpbnZva2U6IChvYmpfaWQsIG1ldGhvZCwgYXJncykgPT5cbiAgICBjb25zb2xlLmxvZyBvYmpfaWRcbiAgICBjb25zb2xlLmxvZyBtZXRob2RcbiAgICBjb25zb2xlLmxvZyBhcmdzXG4gICAgQHJlZ2lzdHJ5W29ial9pZF1bbWV0aG9kXShhcmdzKVxuXG4gIHN0dWI6IChvYmpfaWQsIG1ldGhvZF9uYW1lcykgPT5cbiAgICBzdHViX29iaiA9IHt9XG4gICAgZm9yIG1ldGhvZCBpbiBtZXRob2RfbmFtZXNcbiAgICAgIHN0dWJfb2JqW21ldGhvZF0gPSBAc3R1Yl9tZXRob2Qob2JqX2lkLCBtZXRob2QpXG4gICAgcmV0dXJuIHN0dWJfb2JqXG5cbiAgc3R1Yl9tZXRob2Q6IChvYmpfaWQsIG1ldGhvZCkgPT5cbiAgICAoYXJncykgPT5cbiAgICAgIEBpbnZva2Uob2JqX2lkLCBtZXRob2QsIGFyZ3MpXG5cblxuXG5jbGFzcyBMb2NhbF9SZWdpc3RyeVxuXG4gIGNvbnN0cnVjdG9yOiAoQHJlbW90ZSkgLT5cbiAgICBAcmVnaXN0cnkgPSB7fVxuXG4gIHJlZ2lzdGVyOiAob2JqKSA9PlxuICAgIEByZWdpc3RyeVtvYmouaWRdID0gb2JqXG5cbiAgaW52b2tlOiAob2JqX2lkLCBtZXRob2QsIGFyZ3MpID0+XG4gICAgY29uc29sZS5sb2cgb2JqX2lkXG4gICAgY29uc29sZS5sb2cgbWV0aG9kXG4gICAgY29uc29sZS5sb2cgYXJnc1xuICAgIEByZWdpc3RyeVtvYmpfaWRdW21ldGhvZF0oYXJncylcblxuICBzdHViOiAob2JqX2lkLCBtZXRob2RfbmFtZXMpID0+XG4gICAgc3R1Yl9vYmogPSB7fVxuICAgIGZvciBtZXRob2QgaW4gbWV0aG9kX25hbWVzXG4gICAgICBzdHViX29ialttZXRob2RdID0gQHN0dWJfbWV0aG9kKG9ial9pZCwgbWV0aG9kKVxuICAgIHJldHVybiBzdHViX29ialxuXG4gIHN0dWJfbWV0aG9kOiAob2JqX2lkLCBtZXRob2QpID0+XG4gICAgKGFyZ3MpID0+XG4gICAgICBAaW52b2tlKG9ial9pZCwgbWV0aG9kLCBhcmdzKVxuXG5cbmNsYXNzIEFyaXRobWV0aWNcblxuICBjb25zdHJ1Y3RvcjogKEBpZCkgLT5cbiAgYWRkOiAoYSkgPT4gYS54ICsgYS55XG4gIHN1YjogKGEpID0+IGEueCAtIGEueVxuICBtdWw6IChhKSA9PiBhLnggKiBhLnlcbiAgZGl2OiAoYSkgPT4gYS54IC8gYS55XG4gIG1vZDogKGEpID0+IGEueCAlIGEueVxuICBhYnM6IChhKSA9PiBhLng+MCAmJiBhLnggfHwgLWEueFxuXG5cblxuYXJpdGggPSBuZXcgQXJpdGhtZXRpYygnYXNkZicpXG5yZWdpc3RyeSA9IG5ldyBPYmpfUmVnaXN0cnkoKVxucmVnaXN0cnkucmVnaXN0ZXIoYXJpdGgpXG5hcml0aF9zdHViID0gcmVnaXN0cnkuc3R1YignYXNkZicsIFsnYWRkJywnc3ViJywnbXVsJywnZGl2JywnbW9kJywnYWJzJ10pXG5cbmV4cG9ydHMuYXJpdGggPSBhcml0aFxuZXhwb3J0cy5yZWdpc3RyeSA9IHJlZ2lzdHJ5XG5leHBvcnRzLmFyaXRoX3N0dWIgPSBhcml0aF9zdHViXG4iXX0=
//# sourceURL=/home/carruth/git/ws_rmi/build/coffee/obj_registry.coffee